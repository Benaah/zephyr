# SPDX-License-Identifier: Apache-2.0
# Copyright (c) 2025 Kargo Chain
# nRF9160 configuration overlay

# LTE configuration
CONFIG_LTE_LINK_CONTROL=y
CONFIG_LTE_AUTO_INIT_AND_CONNECT=n
CONFIG_LTE_NETWORK_MODE_LTE_M=y
CONFIG_LTE_NETWORK_MODE_NBIOT=y
CONFIG_LTE_MODE_PREFERENCE_LTE_M=y

# Power saving
CONFIG_LTE_PSM_REQ=y
CONFIG_LTE_PSM_REQ_RPTAU="00000111"  # 70 minutes
CONFIG_LTE_PSM_REQ_RAT="00000000"    # 0 seconds
CONFIG_LTE_EDRX_REQ=y
CONFIG_LTE_EDRX_REQ_VALUE_LTE_M="0101"  # 81.92 seconds

# nRF modem
CONFIG_NRF_MODEM_LIB=y
CONFIG_NRF_MODEM_LIB_SYS_INIT=y
CONFIG_NRF_MODEM_LIB_TRACE=n

# GNSS
CONFIG_GNSS=y
CONFIG_KARGO_GNSS=y
CONFIG_KARGO_GNSS_NRF9160=y

# AWS IoT Configuration
CONFIG_AWS_IOT_ENDPOINT="your-endpoint.iot.us-east-1.amazonaws.com"
CONFIG_AWS_IOT_CLIENT_ID="kargopod-nrf-001"
CONFIG_AWS_IOT_SEC_TAG=1

# Network optimizations for LTE-M
CONFIG_NET_SOCKETS_OFFLOAD=y
CONFIG_NET_NATIVE=n

# Modem key management
CONFIG_MODEM_KEY_MGMT=y

# Date/Time
CONFIG_DATE_TIME=y
CONFIG_DATE_TIME_AUTO_UPDATE=y

# Logging (reduced for power saving)
CONFIG_LOG_MODE_DEFERRED=y
CONFIG_LOG_BUFFER_SIZE=1024
